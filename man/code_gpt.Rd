% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/07_04_open_ended_coding_code_gpt.R
\name{code_gpt}
\alias{code_gpt}
\title{\strong{Code open-ended survey responses using the OpenAI API}}
\usage{
code_gpt(
  data,
  x,
  theme_list,
  id_var = Vrid,
  n = NULL,
  batch_size = 100,
  model = "gpt-4o",
  instructions = NULL
)
}
\arguments{
\item{data}{A data frame containing the survey data.}

\item{x}{The open-ended variable to be coded.}

\item{theme_list}{A data frame with at least two columns: \code{Code} and \code{Bin}.}

\item{id_var}{The respondent ID variable.}

\item{n}{Optional integer; number of responses to code. Defaults to all rows. Useful for testing coding quality without coding every response.}

\item{batch_size}{Integer; number of responses per API call. Defaults to \code{100}.}

\item{model}{Character string; the OpenAI model to use. Defaults to \verb{gpt-4o}.}

\item{instructions}{Optional string; additional instructions for coding.}
}
\value{
A table with respondent IDs, responses, codes, and bins.
}
\description{
This function submits open-ended survey responses to the OpenAI API and returns a dataset with the original responses, assigned codes, and bins from a provided code list.
\itemize{
\item If the \code{theme_list} argument includes a \code{Description} column, its text is incorporated as additional coding instructions.
\item Additional custom instructions can also be supplied through the \code{instructions} argument.
}
}
\details{
Requires an OpenAI API key, which can be generated at \verb{https://platform.openai.com/}, to be set in your R session using \code{Sys.setenv(OPENAI_API_KEY="...")}.

Use \code{code_gpt_to_df()} to update the dataset with results or \code{code_gpt_to_excel()} to export coded responses to Excel.
}
\examples{
# Code Q5
Q5_coded <- code_gpt(data = survey_data, x = Q5, theme_list = theme_list, id_var = Vrid, model = "gpt-4o")

}
